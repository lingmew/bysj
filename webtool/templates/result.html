<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>处理后的图像</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        .image-container {
            display: none; /* 初始隐藏图像 */
            margin-top: 20px; /* 给图像一些间距 */
        }

        img {
            max-width: 50%; /* 缩小至原始图像的一半 */
            height: auto;
        }

        #search {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1>处理后的图像</h1>

    <input type="text" id="search" placeholder="搜索图像名称..." onkeyup="searchImages()">

    <select id="imageSelect" onchange="showImage(this.value)">
        <option value="">选择图像</option>
        {% for image in images %}
            <option value="{{ image }}">{{ image }}</option>
        {% endfor %}
    </select>

    <div id="imageDisplay" class="image-container">
        <h2>所选图像:</h2>
        <img id="selectedImage" alt="Selected Image">
    </div>

    <a href="/">返回上传页面</a>

    <script>
        function showImage(imageName) {
            if (!imageName) {
                document.getElementById('imageDisplay').style.display = 'none'; // 如果没有选定的图像，隐藏图像容器
                return;
            }

            const imageDisplay = document.getElementById('imageDisplay');
            const imgElement = document.getElementById('selectedImage');
            imgElement.src = "{{ url_for('send_result', filename='') }}" + imageName; // 设置图像源
            imageDisplay.style.display = 'block'; // 显示图像容器
        }

        // 实现搜索功能
        function searchImages() {
            const input = document.getElementById('search');
            const filter = input.value.toLowerCase();
            const select = document.getElementById('imageSelect');
            const options = select.options;

            for (let i = 0; i < options.length; i++) {
                const txtValue = options[i].textContent || options[i].innerText;
                options[i].style.display = txtValue.toLowerCase().indexOf(filter) > -1 ? "" : "none";
            }
        }
    </script>
</body>
</html>
